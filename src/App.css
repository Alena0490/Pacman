.game-field {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0;
  margin-bottom: 0;
  border-top: none;   
  border-radius: 0 0 1rem 1rem; 
  background-blend-mode: hard-light;
  border-radius: 0.75rem;
  padding: 0.625rem; /* 10px */
  /* background-blend-mode: overlay; */
  background:  var(--board-background),
  url("./img//grass.webp");
  background-size: cover;
}

.row {
  display: flex;
  gap: 0;
}

.cell {
  position: relative;
  width: var(--cell-size);
  height: var(--cell-size);
  display: flex;
  overflow: visible;
  align-items: center;
  justify-content: center;
  background: radial-gradient(
    circle at 30% 25%, 
    #14101dA0 0, #050308D0 45%, 
    var(--cell-bg) 100%);
background: radial-gradient(
  circle at 30% 25%, 
  var(--cell-bg) 0,        /* closer to the corner = darkest */
  #050308C0 45%,           /* transition */
  #14101dA0 100%           /* far from the corner = lighter*/
);
  font-size: 1.25rem;
  border-left: 1px solid transparent;
  border-top: 1px solid transparent;

  /* slight depth effect, corridors look more like tunnels */
  box-shadow: inset 0 0 0.35rem rgba(0, 0, 0, 0.85);
}

.cell::before {
  content: '';
  position: absolute;
  width: 0.125rem;
  height: 0.125rem;
  background: var(--cell-dot-color);
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.wall {
  width: 3.125rem;  /* 50px */
  height: 3.125rem; /* 50px */
  background-color: #5e318c;
  display: inline-block;
}

/* Walls*/
.cell.wall-top {
  border-top: 0.25rem solid var(--wall-color);
}

.cell.wall-right {
  border-right: 0.25rem solid var(--wall-color);
}

.cell.wall-bottom {
  border-bottom: 0.25rem solid var(--wall-color);
}

.cell.wall-left {
  border-left: 0.25rem solid var(--wall-color);
}

.cell.restricted {
  background-color: transparent;
  background: none;
  box-shadow: none;
}

/* hide the tiny dot in the middle */
.cell.restricted::before {
  display: none;
}

.ground {
  width: 3.125rem;  /* 50px */
  height: 3.125rem; /* 50px */
  display: inline-block;
}

/* PAC-MAN */
/* Pacman base */
.pacman {
  width: var(--pacman-size);  /* 95 % of cell */
  height: var(--pacman-size);
  display: inline-block;
  color:  var(--pacman-color);
  transition: transform var(--transition-speed) ease;
}

/* Animated Pacman SVG */
.animated-pacman {
  width: 100%;
  height: 100%;
}

/* Rotation */
.pacman-right {
  transform: rotate(0deg);    /* → right (default) */
}

.pacman-down {
  transform: rotate(90deg);   /* ↓ top */
}

.pacman-left {
  transform: scaleX(-1);  /* ← left */
}

.pacman-up {
  transform: rotate(270deg);  /* ↑ up */
}

.invincible {
  animation: blink 0.2s infinite;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0.3; }
}

/* COINS (DOTS) */
.coin {
  width: var(--dot-size);
  height: var(--dot-size);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  animation: coin-pulse 0.9s ease-in-out infinite;
  filter: drop-shadow(0 0 0.4rem var(--background-dark))
          brightness(0.7);
  image-rendering: pixelated;
}

.coin.large {
  width: var(--coin-size-large);
  height: var(--coin-size-large);
  filter: 
    drop-shadow(0 0 0.4rem var(--coin-color))
    contrast(1.2);
}

.fruit {
  width: var(--coin-size-large);
  height: var(--coin-size-large);
  object-fit: contain; 
  image-rendering: pixelated; 
  z-index: 200;
  image-rendering: pixelated;
}

.fruit[data-fruit="cherry"] {
  filter: brightness(1.2)
  drop-shadow(0 0 5px var(--danger-light));
  transform: scale(0.95);
}

.fruit[data-fruit="strawberry"] {
  filter: brightness(1.2)
  drop-shadow(0 0 5px var(--danger));
  transform: scale(0.9);
}

.fruit[data-fruit="orange"] {
  filter: brightness(1.1)
  drop-shadow(0 0 5px var(--warning));  
  transform: scale(1.1);
}

.fruit[data-fruit="apple"] {
  filter: contrast(1.1)
  drop-shadow(0 0 5px var(--danger));
}

.fruit[data-fruit="melon"] {
  filter: drop-shadow(0 0 5px var(--ghost-green-tr))
  contrast(1.2);
  transform: scale(1.2);
}

.fruit[data-fruit="galaxian"] {
  filter: brightness(1.1)
  drop-shadow(0 0 5px var(--ghost-blue)); 
  transform: scale(1.4);
  animation: galaxianFloat 2s ease-in-out infinite, galaxianGlow 1.5s ease-in-out infinite;
}

/* GHOSTS  */
/* Ghost sizing  */
.ghost {
  width: var(--ghost-size);
  height: var(--ghost-size);
  min-height: 27px;
  display: inline-block;
  filter: brightness(1.2)
  drop-shadow(0 0 0.25rem currentColor)
         drop-shadow(0 0 0.75rem currentColor);
  animation: ghost-float 2s ease-in-out infinite;
  transition: transform 0.1s ease-out;
  z-index: 100;
}

/* Ghost colors  */
.ghost[data-ghost="2"] {
  color: var(--ghost-cyan);  /* #00FFFF */
  filter: 
    drop-shadow(0 0 0.25rem var(--ghost-cyan-tr))
    drop-shadow(0 0 0.75rem var(--ghost-cyan-tr));
}

.ghost[data-ghost="1"] {
  color: var(--ghost-pink);  /* #EF13F2 */
  filter: 
    drop-shadow(0 0 0.25rem var(--ghost-pink-tr))
    drop-shadow(0 0 0.75rem var(--ghost-pink-tr));
}

.ghost[data-ghost="0"] {
  color: var(--ghost-red);  /* #ff435c */
  filter: 
    drop-shadow(0 0 0.25rem var(--ghost-red-tr))
    drop-shadow(0 0 0.75rem var(--ghost-red-tr));
}

.ghost[data-ghost="3"] {
  color: var(--ghost-orange);  /* #FFA726 */
  filter: 
    drop-shadow(0 0 0.25rem var(--ghost-orange-tr))
    drop-shadow(0 0 0.75rem var(--ghost-orange-tr));
}

/* Bouncing before releasing from the ghost cave  */
.ghost.bounce-up {
  animation: ghost-bounce-up 0.7s ease-in-out infinite;
}

.ghost.bounce-down {
  animation: ghost-bounce-down 0.7s ease-in-out infinite;
}

/* Frightened - override všech barev */
.ghost.frightened {
  color: var(--ghost-blue) ;
  filter: 
    drop-shadow(0 0 0.25rem var(--ghost-blue-tr))
    drop-shadow(0 0 0.75rem var(--ghost-blue-tr));
  animation: ghost-scared 0.5s ease-in-out infinite !important;
}

/* Blinking before frightened ends */
.ghost[data-ghost].frightened.ending {
  filter: 
    drop-shadow(0 0 0.25rem var(--text-color)) 
    drop-shadow(0 0 0.75rem var(--text-color));
  animation: ghost-ending-blink 0.5s steps(1) 5 !important;  /* 5× repeat */
}

/* Red mouth */
.animated-ghost.frightened.ending .ghost-mouth {
  animation: mouth-blink 0.5s steps(1) 5;
  fill: var(--danger);
}

/* Red Eyes */
.animated-ghost.frightened.ending .ghost-eye {
  animation: eyes-blink 0.5s steps(1) 5;
  fill: var(--danger);
}

.ghost.eaten {
  transform: scale(2);
  filter: brightness(1.5);  /* No glow for eyes */
  animation: ghost-eyes-float 0.3s ease-in-out infinite;
}

/* Animated ghost */
.animated-ghost {
  width: 100%;
  height: 100%;
}

.animated-ghost .pupil {
  transition: cx 0.15s ease-out, cy 0.15s ease-out;
}

/*** GHOSTS -  SCORE INCREASE */
.floating-score {
  position: absolute;
  color: var(--text-color);
  font-size: 1.5rem;
  font-weight: bold;
  text-shadow: 
    0 0 0.3rem var(--ghost-cyan),  /* Cyan */
    0 0 0.8rem var(--ghost-green),  /* Green */
    0 0 1.5rem var(--ghost-pink);  /* Magenta */
  animation: 
    float-up 1.2s ease-out forwards,
    glow-pulse 0.3s ease-in-out 3;  /* 3× pulse */
  pointer-events: none;
  z-index: 100;

  /* Position based on data attributes */
  left: calc(var(--x) * var(--cell-size) + var(--cell-size) / 2);
  top: calc(var(--y) * var(--cell-size) + var(--cell-size) / 2);
  transform: translate(-50%, -50%);
}

/* READY! message - bigger, different animation */
.floating-score.ready-message {
  width: 100%;
  margin-top: 0 auto;
  padding-left: 3%;
  font-size: 1.5rem;
  text-align: center;
  animation: pulse-ready 2s ease-in-out forwards;
}

/* ===== QUERIES ===== */
@media (max-width: 768px) {
  html {
    font-size: 14px;
  }
  
  .game-field {
    padding: 0.5rem;
  }
}

@media (max-width: 480px) {
  html {
    font-size: 12px; 
  }
}

/* ===== KEYFRAMES ===== */
/* DOT */
@keyframes coin-pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

/* GHOSTS */
@keyframes ghost-float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-0.25rem);  /* A slight bounce */
  }
}

 /* Ghost bounce */
  @keyframes ghost-bounce-up {
    0%, 100% { 
      transform: translateY(0); 
    }
    50% { 
      transform: translateY(-2rem); 
    }
  }

  @keyframes ghost-bounce-down {
    0%, 100% { 
      transform: translateY(0); 
    }
    50% { 
      transform: translateY(2rem); 
    }
  }

  /* Scared mode */
  @keyframes ghost-scared {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
  }

  @keyframes ghost-ending-blink {
    0%, 49% {
      color: var(--ghost-blue);  /* Modrá */
      filter: 
        drop-shadow(0 0 0.25rem var(--ghost-blue-tr))
        drop-shadow(0 0 0.75rem var(--ghost-blue-tr));
    }
    50%, 100% {
      color: var(--text-color);  /* Bílá */
      filter: 
        drop-shadow(0 0 0.5rem var(--text-color))
        drop-shadow(0 0 1rem var(--text-color));
    }
  }

  @keyframes mouth-blink {
    0%, 49% { fill: #0000a0; } 
    50%, 100% { fill: var(--danger); } 
  }

  @keyframes eyes-blink {
  0%, 49% { fill: #f5f5f5; }  /* Tmavá */
  50%, 100% { fill: var(--danger); }  /* Červená */
}
   
  @keyframes ghost-eyes-float {
    0%, 100% { transform: scale(1.6) translateY(0); }
    50% { transform: scale(1.5) translateY(-2px); }
  }

  /* SCORE */
  /* Score increase */
  @keyframes float-up {
  0% { 
    opacity: 1;
    transform: translateY(0);
  }
  100% { 
    opacity: 0;
    transform: translateY(-2rem);
  }
}

@keyframes glow-pulse {
  0%, 100% { 
    filter: brightness(1);
  }
  50% { 
    filter: brightness(1.5);
  }
}

/* Ready */
@keyframes pulse-ready {
  0% { 
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.5);
  }
  10% { 
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.2);
  }
  90% { 
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  100% { 
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
  }
}

/* PAC-MAN */
@keyframes death-fade {
  0% { opacity: 1; }
  80% { opacity: 0.8; }
  100% { opacity: 0; }
}

/* GALAXIAN */
@keyframes galaxianFloat {
  0%, 100% {
    transform: translateY(0) rotate(0deg) scale(1.4);
  }
  25% {
    transform: translateY(-3px) rotate(-5deg) scale(1.4);
  }
  50% {
    transform: translateY(0) rotate(0deg) scale(1.4);
  }
  75% {
    transform: translateY(3px) rotate(5deg) scale(1.4);
  }
}

@keyframes galaxianGlow {
  0%, 100% {
    filter: drop-shadow(0 0 5px rgba(0, 255, 255, 0.5));
  }
  50% {
    filter: drop-shadow(0 0 15px rgba(0, 255, 255, 0.9));
  }
}
