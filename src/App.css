
.game-field {
  /* width: 100%; */
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0;
  margin-bottom: 1rem;
  border-top: none;   
  border-radius: 0 0 1rem 1rem; 
  background-blend-mode: hard-light;
  border-radius: 0.75rem;
  padding: 0.625rem; /* 10px */
  /* background-blend-mode: overlay; */
  background:  var(--board-background),
  url("./img//grass.webp");
  background-size: cover;
}

.row {
  display: flex;
  gap: 0;
}

.cell {
  position: relative;
  width: var(--cell-size);
  height: var(--cell-size);
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(
    circle at 30% 25%, 
    #14101dA0 0, #050308D0 45%, 
    var(--cell-bg) 100%);
background: radial-gradient(
  circle at 30% 25%, 
  var(--cell-bg) 0,        /* nejblíž rohu = nejtmavší */
  #050308C0 45%,           /* přechod */
  #14101dA0 100%           /* dál od rohu = světlejší */
);
  font-size: 1.25rem;
  border-left: 1px solid transparent;
  border-top: 1px solid transparent;

  /* slight depth effect, corridors look more like tunnels */
  box-shadow: inset 0 0 0.35rem rgba(0, 0, 0, 0.85);
}

.cell::before {
  content: '';
  position: absolute;
  width: 0.125rem;
  height: 0.125rem;
  background: var(--cell-dot-color);
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.wall {
  width: 3.125rem;  /* 50px */
  height: 3.125rem; /* 50px */
  background-color: #5e318c;
  display: inline-block;
}

/* Walls*/
.cell.wall-top {
  border-top: 0.25rem solid var(--wall-color);
  /* box-shadow: 0.15rem 0.15rem 0.15rem var(--wall-glow); */
}

.cell.wall-right {
  border-right: 0.25rem solid var(--wall-color);
  /* box-shadow: 0.15rem 0.15rem 0.15rem var(--wall-glow); */
}

.cell.wall-bottom {
  border-bottom: 0.25rem solid var(--wall-color);
  /* box-shadow: 0.15rem 0.15rem 0.15rem var(--wall-glow); */
}

.cell.wall-left {
  border-left: 0.25rem solid var(--wall-color);
  /* box-shadow: 0.15rem 0.15rem 0.15rem var(--wall-glow); */
}

.cell.restricted {
  /* same as outside maze – show only background from .game-field */
  background-color: transparent;
  background: none;
  box-shadow: none;
}

/* hide the tiny dot in the middle */
.cell.restricted::before {
  display: none;
}

.ground {
  width: 3.125rem;  /* 50px */
  height: 3.125rem; /* 50px */
  display: inline-block;
}

/* PAC-MAN */
.pacman {
  width: var(--pacman-size);  /* 95 % of cell */
  height: var(--pacman-size);
  display: inline-block;
  color:  var(--pacman-color);
  transition: transform var(--transition-speed) ease;
}

/* Rotation */
.pacman-right {
  transform: rotate(0deg);    /* → right (default) */
}

.pacman-down {
  transform: rotate(90deg);   /* ↓ top */
}

.pacman-left {
  transform: scaleX(-1);  /* ← left */
}

.pacman-up {
  transform: rotate(270deg);  /* ↑ up */
}


/* COINS */
.coin {
  width: var(--coin-size);
  height: var(--coin-size);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  animation: coin-pulse 0.9s ease-in-out infinite;
  filter: drop-shadow(0 0 0.4rem var(--shadow-glow-yellow));
}

.coin.large {
  width: var(--coin-size-large);
  height: var(--coin-size-large);
  filter: 
    drop-shadow(0 0 0.4rem var(--coin-color))
    contrast(1.2);
}

/* GHOSTS  */

/* Ghost sizing  */
.ghost {
  width: var(--ghost-size);
  height: var(--ghost-size);
  min-height: 27px;
  display: inline-block;
  filter: brightness(1.2)
  drop-shadow(0 0 0.25rem currentColor)
         drop-shadow(0 0 0.75rem currentColor);
  animation: ghost-float 2s ease-in-out infinite;
  transition: transform 0.1s ease-out;
}

/* Ghost colors  */
.ghost[data-ghost="0"] {
  color: var(--ghost-cyan);  /* #00FFFF */
  filter: 
    drop-shadow(0 0 0.25rem var(--ghost-cyan-tr))
    drop-shadow(0 0 0.75rem var(--ghost-cyan-tr));
}

.ghost[data-ghost="1"] {
  color: var(--ghost-pink);  /* #EF13F2 */
  filter: 
    drop-shadow(0 0 0.25rem var(--ghost-pink-tr))
    drop-shadow(0 0 0.75rem var(--ghost-pink-tr));
}

.ghost[data-ghost="2"] {
  color: var(--ghost-red);  /* #ff435c */
  filter: 
    drop-shadow(0 0 0.25rem var(--ghost-red-tr))
    drop-shadow(0 0 0.75rem var(--ghost-red-tr));
}

.ghost[data-ghost="3"] {
  color: var(--ghost-orange);  /* #FFA726 */
  filter: 
    drop-shadow(0 0 0.25rem var(--ghost-orange-tr))
    drop-shadow(0 0 0.75rem var(--ghost-orange-tr));
}

/* Frightened ghost - overrides personality colors  */
.ghost .animated-ghost.scared {
  color: var(--ghost-blue);  /* #2121FF */
  animation: ghost-scared 0.5s ease-in-out infinite;  /* Faster anination */
}

.ghost:has(.animated-ghost.scared) {
  filter: 
    drop-shadow(0 0 0.25rem var(--ghost-blue-tr))
    drop-shadow(0 0 0.75rem var(--ghost-blue-tr)) !important;
}

/* Frightened state - overrides personality colors */
.ghost[data-ghost].frightened {
  color: var(--ghost-blue) !important;
  animation: ghost-scared 0.5s ease-in-out infinite;  /* Faster anination */
}

/* Blinking before frightened ends */
.ghost[data-ghost].frightened.ending {
  animation: ghost-blink 0.3s infinite;
}

.ghost.eaten {
  transform: scale(2);
  filter: brightness(1.5);  /* No glow for eyes */
  animation: ghost-eyes-float 0.3s ease-in-out infinite;
}

/* Animated ghost */
.animated-ghost {
  width: 100%;
  height: 100%;
}

.animated-ghost .pupil {
  transition: cx 0.15s ease-out, cy 0.15s ease-out;
}

/*** GHOSTS -  SCORE INCREASE */
.floating-score {
  position: absolute;
  color: var(--text-color);
  font-size: 1.5rem;
  font-weight: bold;
  text-shadow: 
    0 0 0.3rem var(--ghost-cyan),  /* Cyan */
    0 0 0.8rem var(--ghost-green),  /* Green */
    0 0 1.5rem var(--ghost-pink);  /* Magenta */
  animation: 
    float-up 1.2s ease-out forwards,
    glow-pulse 0.3s ease-in-out 3;  /* 3× pulse */
  pointer-events: none;
  z-index: 100;

  /* Position based on data attributes */
  left: calc(var(--x) * var(--cell-size) + var(--cell-size) / 2);
  top: calc(var(--y) * var(--cell-size) + var(--cell-size) / 2);
  transform: translate(-50%, -50%);
}


/* READY! message - bigger, different animation */
.floating-score.ready-message {
  width: 100%;
  margin-top: 0 auto;
  padding-left: 3%;
  font-size: 2.25rem;
  text-align: center;
  animation: pulse-ready 2s ease-in-out forwards;
}

/* ===== QUERIES ===== */
@media (max-width: 768px) {
  html {
    font-size: 14px;
  }
  
  .game-field {
    padding: 0.5rem;
  }
}

@media (max-width: 480px) {
  html {
    font-size: 12px; 
  }
}


/* ===== KEYFRAMES ===== */
/* Coin */
@keyframes coin-pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

/* Ghosts */
@keyframes ghost-float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-0.25rem);  /* A slight bounce */
  }
}

  @keyframes ghost-scared {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
  }

  @keyframes ghost-blink {
    0%, 49% { 
      color: var(--ghost-blue-tr); 
    }
    50%, 100% { 
      color: rgba(255, 255, 255, 0.7);  /* White flash */
    }
  }

  @keyframes ghost-eyes-float {
    0%, 100% { transform: scale(1.6) translateY(0); }
    50% { transform: scale(1.5) translateY(-2px); }
  }

  /* Score increase */
  @keyframes float-up {
  0% { 
    opacity: 1;
    transform: translateY(0);
  }
  100% { 
    opacity: 0;
    transform: translateY(-2rem);
  }
}

@keyframes glow-pulse {
  0%, 100% { 
    filter: brightness(1);
  }
  50% { 
    filter: brightness(1.5);
  }
}

/* Ready */
@keyframes pulse-ready {
  0% { 
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.5);
  }
  10% { 
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.2);
  }
  90% { 
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  100% { 
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
  }
}